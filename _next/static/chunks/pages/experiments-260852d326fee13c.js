(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[777],{4944:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/experiments",function(){return s(3678)}])},3576:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5893),i=s(1664);function r(e){var t,s=e.color,r=e.children,n=e.href,l=e.type,o=e.fullwidth,c=e.onClick,d=void 0===c?function(){}:c,x="flex-shrink-0 inline-flex justify-center items-center px-4 py-3 text-lg duration-100 font-semibold rounded shadow-nhsuk-button focus:bg-nhsuk-focus focus:text-nhsuk-text active:shadow-none ".concat(o?"w-full":"");switch(s){default:case"primary":t="bg-green-500 text-white hover:bg-green-600";break;case"secondary":t="bg-gray-500 text-white hover:bg-gray-600";break;case"white":t="bg-white text-nhsuk-text hover:bg-gray-100"}var h="".concat(x," ").concat(t);return n?(0,a.jsx)(i.default,{href:n,children:(0,a.jsx)("a",{className:h,children:r})}):(0,a.jsx)("button",{type:l||"button",className:h,onClick:d,children:r})}},3424:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(5893);function i(e){var t=e.children,s=e.fullwidth;return(0,a.jsx)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 ".concat(s?"":"max-w-6xl"),children:t})}},8651:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(5893);function i(e){var t=e.title,s=e.description;return(0,a.jsxs)("div",{className:"mb-10",children:[t&&(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl text-gray-800 font-bold mb-6",children:t}),s&&(0,a.jsx)("p",{className:"sm:text-lg md:text-xl text-nhsuk-secondary-text",children:s})]})}},3866:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(5893),i=s(1664),r=s(7692),n=s(3424);function l(){return(0,a.jsx)("div",{className:"bg-gray-200 text-gray-500 border-t-4 border-blue-500 py-8 md:py-10",children:(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-10 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-6 md:space-y-0 md:space-x-10 md:flex-row md:justify-between md:items-start",children:[(0,a.jsx)("div",{className:"space-y-2 md:space-y-0 -ml-4",children:r.e8.map((function(e){return(0,a.jsx)(i.default,{href:e.href,children:(0,a.jsx)("a",{className:"block md:inline-block underline px-4 pb-4",children:e.name})},e.name)}))}),(0,a.jsx)("div",{className:"flex-shrink-0",children:"\xa9 Copyright 2020 NHSX"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-3 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-3 text-base",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 483.2 195.7",height:"17",width:"41",focusable:"false",children:(0,a.jsx)("path",{fill:"currentColor",d:"M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"})}),(0,a.jsx)("span",{className:"",children:"All content is available under the Open Government Licence v3.0, except where otherwise stated."})]})]})})})}},4789:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var a=s(5893),i=s(1664),r=s(1163),n=s(6727),l=s(5506),o=s(9065),c=s(9743),d=s(5438),x=s(7692),h=s(3424);function u(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var m=function(e){var t=e.category;return(0,a.jsx)("div",{className:"border-t border-white border-opacity-20",children:(0,a.jsx)("nav",{className:"flex flex-col space-y-2 md:space-y-0 md:flex-row md:space-x-6",children:x.Hc.map((function(e){return(0,a.jsx)(i.default,{href:e.href,children:(0,a.jsx)("a",{className:u(e.name===t?"md:border-b-4 md:pb-3 border-white font-semibold":"border-transparent","group flex items-center px-4 py-4 border-l-4 md:border-l-0 text-white hover:underline text-base focus:bg-nhsuk-yellow focus:text-black focus:border-black md:focus:border-b-4 md:focus:pb-3"),children:e.name})},e.name)}))})})},f=function(){return(0,a.jsx)(i.default,{href:"/",children:(0,a.jsxs)("a",{className:"flex flex-col space-y-6 md:space-y-4 lg:space-y-0 lg:flex-row lg:items-center lg:space-x-2 flex-shrink-0 text-white",children:[(0,a.jsx)("span",{children:(0,a.jsx)("img",{className:"h-10 w-auto",src:"".concat(d.O,"/logo-inverted.svg"),alt:"NCCID"})}),(0,a.jsx)("span",{className:"text-sm lg:text-lg",children:"National COVID-19 Chest Image Database (NCCID)"})]})})},p=function(){var e=(0,r.useRouter)().query.q;return(0,a.jsxs)("div",{className:"flex-1 flex items-center space-x-6",children:[(0,a.jsx)("form",{action:"".concat(d.O,"/search"),method:"GET",className:"flex-1 justify-stretch relative",children:(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)("input",{type:"text",name:"q",placeholder:"Search",className:"w-full border-2 pr-16 border-transparent focus:ring-nhsuk-focus focus:ring-4 focus:border-white rounded sm:text-sm",defaultValue:e||""}),(0,a.jsx)("div",{className:"absolute right-0 top-0 bottom-0",children:(0,a.jsx)("button",{type:"submit",className:"w-full h-full flex-1 bg-gray-50 rounded-tr rounded-br px-3 text-blue-500 focus:bg-nhsuk-yellow focus:text-black ",children:(0,a.jsx)(c.Z,{className:"w-6 h-6"})})})]})}),(0,a.jsx)(i.default,{href:"https://github.com/nhsx/covid-chest-imaging-database",children:(0,a.jsx)("a",{target:"_BLANK",className:"rounded-full",children:(0,a.jsxs)("svg",{className:"w-10 h-10 flex-shrink-0 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("g",{clipPath:"url(githublogo)",children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.18391.249268C3.82241.249268.253906 3.81777.253906 8.17927c0 3.46933 2.279874 6.44313 5.451874 7.53353.3965.0991.49563-.1983.49563-.3965v-1.3878c-2.18075.4956-2.67638-.9912-2.67638-.9912-.3965-.8922-.89212-1.1895-.89212-1.1895-.69388-.4957.09912-.4957.09912-.4957.793.0992 1.1895.793 1.1895.793.69388 1.2887 1.88338.8922 2.27988.6939.09912-.4956.29737-.8921.49562-1.0904-1.78425-.1982-3.5685-.8921-3.5685-3.96496 0-.89212.29738-1.586.793-2.08162-.09912-.19825-.3965-.99125.09913-2.08163 0 0 .69387-.19825 2.18075.793.59475-.19825 1.28862-.29737 1.9825-.29737.69387 0 1.38775.09912 1.98249.29737 1.4869-.99125 2.1808-.793 2.1808-.793.3965 1.09038.1982 1.88338.0991 2.08163.4956.59475.793 1.28862.793 2.08162 0 3.07286-1.8834 3.66766-3.66764 3.86586.29737.3965.59474.8921.59474 1.586v2.1808c0 .1982.0991.4956.5948.3965 3.172-1.0904 5.4518-4.0642 5.4518-7.53353-.0991-4.3615-3.6676-7.930002-8.02909-7.930002z",clipRule:"evenodd",className:"jsx-1651122719"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"githublogo",children:(0,a.jsx)("path",{fill:"transparent",d:"M0 0h15.86v15.86H0z",transform:"translate(.253906 .0493164)"})})})]})})})]})};function v(e){var t=e.category,s=e.fullwidth;return(0,a.jsx)(n.pJ,{as:"nav",className:"bg-blue-500",children:function(e){var i=e.open;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h.Z,{fullwidth:s,children:[(0,a.jsxs)("div",{className:"flex justify-between py-6",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(f,{})}),(0,a.jsx)("div",{className:"hidden md:flex",children:(0,a.jsx)(p,{})}),(0,a.jsx)("div",{className:"-mr-2 flex items-start md:hidden",children:(0,a.jsxs)(n.pJ.Button,{className:"bg-white inline-flex items-center justify-center p-2 text-nhsuk-text hover:bg-gray-100 focus:bg-nhsuk-yellow focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nhsuk-yellow",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),i?(0,a.jsx)(l.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,a.jsx)(o.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})})]}),(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(m,{category:t})})]}),(0,a.jsxs)(n.pJ.Panel,{className:"md:hidden",children:[(0,a.jsx)(m,{category:t}),(0,a.jsx)("div",{className:"flex p-4 border-r border-white border-opacity-20",children:(0,a.jsx)(p,{})})]})]})}})}},6784:function(e,t,s){"use strict";s.d(t,{P:function(){return x}});var a=s(4051),i=s.n(a),r=s(7460),n=s.n(r),l=s(5438);function o(e,t,s,a,i,r,n){try{var l=e[r](n),o=l.value}catch(c){return void s(c)}l.done?t(o):Promise.resolve(o).then(a,i)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function n(e){o(r,a,i,n,l,"next",e)}function l(e){o(r,a,i,n,l,"throw",e)}n(void 0)}))}}var d=function(){var e=c(i().mark((function e(t){var s,a,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,fetch("".concat(l.O).concat(t));case 4:return s=e.sent,a=s.body.getReader(),r=new TextDecoder("utf-8"),e.next=9,a.read();case 9:return n=e.sent,o=r.decode(n.value),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=c(i().mark((function e(t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:return s=e.sent,e.abrupt("return",new Promise((function(e){n().parse(s,{skipEmptyLines:!0,complete:function(t){e(t.data)},error:function(e){reject(e)}})})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},7692:function(e,t,s){"use strict";s.d(t,{Hc:function(){return a},O7:function(){return i},Ar:function(){return r},e8:function(){return n}});var a=[{name:"Overview",href:"/"},{name:"Technical Documentation",href:"/data-access"},{name:"Other Information",href:"/nccid-collaborative"},{name:"Experiments",href:"/experiments"}],i=[{name:"Accessing the NCCID data",href:"/data-access"},{name:"Resources for data users",href:"/resources"}],r=[{name:"NCCID Collaborative",href:"/nccid-collaborative"},{name:"NCCID project summaries",href:"/project-summaries"},{name:"Performance Assessment Call",href:"/performance-assessment-call"},{name:"Links to other datasets",href:"/other-datasets"},{name:"Training data statistics",href:"/stats"}],n=[{name:"Overview",href:"/"},{name:"Accessing the NCCID data",href:"/data-access"},{name:"Resources for data users",href:"/resources"},{name:"NCCID Collaborative",href:"/nccid-collaborative"},{name:"NCCID project summaries",href:"/project-summaries"},{name:"Performance Assessment Call",href:"/performance-assessment-call"},{name:"Links to other datasets",href:"/other-datasets"},{name:"Training data statistics",href:"/stats"}]},5438:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var a="/covid-chest-imaging-database"},3678:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var a=s(5893),i=s(1109),r=s(5376);function n(e){var t=e.barData,s=e.barLabels,i=(e.lineData,e.xLabel),n=e.yLabel,l="#FFFFFF",o="#FFFFFF",c="#FFFFFF",d={labels:s,datasets:[{label:i,data:t,backgroundColor:"rgba(255,255,255,0.5)",borderColor:"#FFFFFF",borderWidth:2}]},x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1},annotation:{annotations:[{drawTime:"afterDatasetsDraw",borderColor:"#FFF",borderDash:[12,4],borderWidth:2,mode:"horizontal",type:"line",yMin:80,yMax:80,scaleID:"y-axis-0"}]}},scales:{x:{ticks:{display:!0,color:c,font:{size:14,weight:500}},grid:{borderColor:o,borderWidth:4,display:!1,z:1},title:{display:!0,text:i,font:{size:21,weight:700},color:l}},y:{ticks:{display:!1,color:c,beginAtZero:!0,min:0,max:100,stepSize:20},grid:{borderColor:o,borderWidth:4,drawBorder:!1,display:!1,z:1},title:{display:n,text:n,font:{size:21,weight:700},color:l}}}};return(0,a.jsx)(r.$Q,{className:"flex-1",data:d,options:x})}function l(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center pb-12",children:[(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsxs)("h2",{className:"text-white text-3xl 2xl:text-5xl font-bold",children:[(0,a.jsx)("span",{className:"text-blue-200",children:"Model Fairness:"})," 80%"]})}),(0,a.jsxs)("div",{className:"flex-1 grid lg:grid-cols-3 gap-10 h-full w-full lg:max-w-[1600px] lg:max-h-[500px] 2xl:max-h-[600px] mx-auto py-12",children:[(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("div",{className:"flex items-stretch flex-1",children:(0,a.jsx)(n,{barData:[70,90],barLabels:["Male","Female"],xLabel:"Gender",yLabel:"Accuracy"})})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("div",{className:"flex items-stretch flex-1",children:(0,a.jsx)(n,{barData:[83,75],barLabels:["Under 65","Over 65"],xLabel:"Age"})})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("div",{className:"flex items-stretch flex-1",children:(0,a.jsx)(n,{barData:[65,81,92,80],barLabels:["W","B","B","O"],xLabel:"Ethnicity"})})})]})]})})}s(3328).kL.register(i.Z);var o=s(4051),c=s.n(o),d=s(4398),x=s(7294),h=s(6784);s(1877);function u(e){e.height;var t=e.plotData,s=e.fp,i=e.tp,n="#212b32",l="rgba(255,255,255,0)",o="#212b32",c="rgba(0, 94, 184, .3)",d=(0,x.useRef)(null),h=(0,x.useState)({datasets:[]}),u=h[0],m=h[1];(0,x.useEffect)((function(){var e=d.current;if(e){var a=e.ctx.createLinearGradient(0,0,0,300);a.addColorStop(0,"rgba(0, 94, 184, .2)"),a.addColorStop(1,"rgba(0, 94, 184, 0)"),m({datasets:[{label:"X",fill:!1,showLine:!0,pointRadius:0,data:[{x:s,y:0},{x:s,y:1}],borderColor:c,borderWidth:2},{label:"Y",fill:!1,showLine:!0,pointRadius:0,data:[{x:0,y:i},{x:1,y:i}],borderColor:c,borderWidth:2},{label:"Chance",fill:!1,showLine:!0,pointRadius:0,data:[{x:0,y:0},{x:1,y:1}],borderColor:c,borderWidth:2,borderDash:[10,4]},{label:"ROC Curve",data:t,fill:"start",showLine:!0,pointRadius:0,interpolate:!0,borderColor:"#005eb8",backgroundColor:a,cubicInterpolationMode:"monotone",tension:.4}]})}}),[i,s]);var f={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",axis:"x",intersect:!1},plugins:{legend:{display:!1,labels:{filter:function(e){if("X"!==e.text&&"Y"!==e.text)return!0},color:n}},title:{display:!1,text:"Receiver Operating Characteristic (ROC)",font:{size:14},color:n}},scales:{x:{beginAtZero:!0,title:{display:!0,text:"FP Rate (1 - Specificity)",font:{size:14,weight:500},color:n},ticks:{maxTicksLimit:10,color:o},grid:{borderColor:l,borderWidth:4,display:!1,z:1}},y:{beginAtZero:!0,title:{display:!0,text:"TP Rate Sensitivity",font:{size:14,weight:500},color:n},ticks:{maxTicksLimit:10,color:o},grid:{display:!0,borderColor:l,borderDash:[12,4],borderWidth:2,z:1}}},animation:{duration:0}};return(0,a.jsx)(r.bp,{ref:d,className:"flex-1",data:u,options:f,plugins:[{afterDraw:function(e){if(e.tooltip._active&&e.tooltip._active.length){var t=e.tooltip._active[0],s=e.ctx,a=t.element.x,i=e.scales.y.top,r=e.scales.y.bottom;s.save(),s.beginPath(),s.moveTo(a,i),s.lineTo(a,r),s.lineWidth=1,s.strokeStyle="#000000",s.stroke(),s.restore()}}}]})}var m=s(6727),f=s(3576);function p(e){var t=e.show,s=e.onClose,i=e.title,r=e.content;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.uT,{appear:!0,show:t,as:x.Fragment,children:(0,a.jsx)(m.Vq,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:s,children:(0,a.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[(0,a.jsx)(m.uT.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(m.Vq.Overlay,{className:"fixed inset-0 bg-blue-800 bg-opacity-80"})}),(0,a.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200b"}),(0,a.jsx)(m.uT.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)("div",{className:"inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl md:p-8",children:[(0,a.jsx)(m.Vq.Title,{as:"h3",className:"text-xl font-semibold leading-6 text-gray-900",children:i}),(0,a.jsx)("div",{className:"mt-4 max-h-96 overflow-y-auto",children:r}),(0,a.jsx)("div",{className:"flex mt-6",children:(0,a.jsx)(f.Z,{onClick:s,children:"Okay"})})]})})]})})})})}function v(e){var t=e.labels,s=e.values,i=(e.colors,{labels:t,datasets:[{label:"Results with Covid",data:s,backgroundColor:["#d2d8dc","#007f3b","#005eb8"]}]}),n={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(e){return" "+e.formattedValue+"%"},title:function(e){return e[0].label}}},legend:{labels:{color:"#212b32",font:{size:14,weight:500}}}}};return(0,a.jsx)(r.$I,{className:"flex-1",data:i,options:n})}var b=s(3424),g=s(8651);function j(e,t,s,a,i,r,n){try{var l=e[r](n),o=l.value}catch(c){return void s(c)}l.done?t(o):Promise.resolve(o).then(a,i)}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},a=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),a.forEach((function(t){y(e,t,s[t])}))}return e}var N=function(e){var t=e.children;return(0,a.jsx)("div",{className:"flex justify-center w-full mb-6",children:(0,a.jsx)("div",{className:"px-4 py-1",children:(0,a.jsx)("h3",{className:"text-nhsuk-text font-semibold text-center text-lg",children:t})})})},C=function(e){var t=e.title,s=e.value;return(0,a.jsxs)("div",{className:"px-4 py-2",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate mb-1",children:t}),(0,a.jsxs)("dd",{className:"text-lg font-semibold text-nhsuk-text",children:[parseFloat(s).toFixed(2),"%"]})]})},k=function(e){var t=e.title,s=e.description;return(0,a.jsxs)("div",{className:"grid sm:grid-cols-12 gap-2 text-nhsuk-text",children:[(0,a.jsx)("dt",{className:"sm:col-span-3 font-medium",children:t}),(0,a.jsx)("dd",{className:"sm:col-span-9",children:s})]})},F=function(e){var t=e.step,s=e.min,i=e.max,r=e.value,n=e.onChange;return(0,a.jsx)(d.Range,{step:t,min:s,max:i,values:[r],onChange:n,renderTrack:function(e){var t=e.props,s=e.children;return(0,a.jsx)("div",w({},t,{className:"h-1 bg-blue-400 rounded-full my-2",children:s}))},renderThumb:function(e){var t=e.props;return(0,a.jsx)("div",w({},t,{className:"w-6 h-6 bg-blue-500 shadow rounded-full"}))}})};function P(){var e=(0,x.useState)(5),t=e[0],s=e[1],i=(0,x.useState)(.4),r=i[0],n=i[1],l=(0,x.useState)(null),o=l[0],d=l[1],m=(0,x.useState)(!1),y=m[0],w=m[1],P=(0,x.useState)(!1),O=P[0],T=P[1],D=(0,x.useMemo)((function(){return o&&o.find((function(e){return parseFloat(e.operatingPoint).toFixed(2)-r<.01}))}),[o,r])||{x:0,y:0},I=D.x,A=D.y,R=I,S=A,V=1-R,L=t/100,Z=0==r?"N/A":V*(1-L)/(V*(1-L)+(1-S)*L),z=1==r?"N/A":S*L/(S*L+(1-V)*(1-L)),M=S*t,_=V*(100-t),E=(1-S)*t,W=(1-V)*(100-t),B=M+_,q=function(){var e,t=(e=c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.P)("/data/roc_data.csv");case 2:(t=e.sent).shift(),t=t.map((function(e){return{x:e[1],y:e[2],operatingPoint:e[3]}})),d(t);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,s=arguments;return new Promise((function(a,i){var r=e.apply(t,s);function n(e){j(r,a,i,n,l,"next",e)}function l(e){j(r,a,i,n,l,"throw",e)}n(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,x.useEffect)((function(){q()}),[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"h-full flex flex-col items-center mx-auto",children:[(0,a.jsx)(b.Z,{children:(0,a.jsx)("div",{className:"lg:mb-12",children:(0,a.jsx)(g.Z,{title:"Operating Point",description:(0,a.jsxs)(a.Fragment,{children:["This page aims to highlight the role of the \u201coperating point\u201d selected by AI developers when building a new model, while also providing some baseline results for the National COVID-19 Chest Imaging Database (NCCID). The operating point allows AI developers to adjust the threshold used by AI models to make a binary decision. This means an AI tool could be made more conservative by giving a positive answer even when unsure, and vice versa. A Receiver Operating Characteristic (ROC) curve can be plotted to represent the relationship between the True Positives (TPs) correctly detected by an AI model against the True Negatives (TNs) in function of the operating point. Typically, the operating point in healthcare applications for automated diagnosis would be set by AI developers so it guarantees that as many symptomatic patients are detected earlier in the healthcare pathway while keeping the false positives as low as possible to keep triage efficient and avoid any unnecessary stress for the patients.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Below, an AI model has been trained on the chest x-rays stored in the NCCID to predict whether a patient was COVID-positive or negative, using polymerase chain reaction (PCR) tests as a reference. This AI model has purely been built as a prototype for research and is not meant for real-world deployment. The model was tested using data from 4,872 patients (3,457 COVID-negative and 1,415 COVID-positive patients) held out from the NCCID training data."]})})})}),(0,a.jsx)("div",{className:"w-full max-w-7xl 2xl:max-w-[1600px] mx-auto mb-8 sm:mb-0 sm:px-6",children:(0,a.jsx)("div",{className:"border shadow-xl bg-white border-gray-100",children:(0,a.jsxs)("div",{className:"flex flex-col p-4 sm:p-6 xl:space-x-6 xl:flex-row xl:justify-between xl:items-center 2xl:space-x-12",children:[(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 sm:flex-1 gap-6 text-nhsuk-text",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between space-x-6 items-center mb-3",children:[(0,a.jsx)("div",{children:(0,a.jsx)("label",{className:"font-medium",children:"Operating point"})}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-sm text-gray-500",children:parseFloat(r).toFixed(2)})})]}),(0,a.jsx)(F,{min:0,max:1,step:.01,value:r,onChange:function(e){return n(e||r)}})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between space-x-6 items-center mb-3",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"font-medium",children:["Prevalence ",(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"(% of population with COVID)"}),":"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t,"%"]})})]}),(0,a.jsx)(F,{min:0,max:100,step:1,value:t,onChange:function(e){return s(e||t)}})]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-x-0 space-y-4 sm:flex-row sm:justify-center sm:space-x-4 sm:space-y-0 mt-10 xl:mt-0 xl:justify-end",children:[(0,a.jsx)("div",{className:"flex-1 xl:flex-auto",children:(0,a.jsx)(f.Z,{onClick:function(){return T(!0)},fullwidth:!0,children:"What does this data mean?"})}),(0,a.jsx)("div",{className:"flex-1 xl:flex-auto",children:(0,a.jsx)(f.Z,{color:"secondary",onClick:function(){return w(!0)},fullwidth:!0,children:"View glossary"})})]})]})})}),(0,a.jsxs)("div",{className:"flex flex-col w-full lg:max-w-[1600px] mx-auto sm:overflow-hidden p-4 lg:p-0",children:[(0,a.jsxs)("div",{className:"flex-1 grid lg:grid-cols-4 xl:divide-x xl:divide-gray-200",children:[(0,a.jsxs)("div",{className:"lg:col-span-4 xl:col-span-2 flex flex-col pb-12 sm:px-8 sm:py-10 lg:pb-0 xl:py-10",children:[(0,a.jsx)("div",{children:(0,a.jsx)(N,{children:"ROC Curve"})}),(0,a.jsx)("div",{className:"flex items-stretch flex-1",children:o&&(0,a.jsx)(u,{plotData:o,fp:R,tp:A})})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 xl:col-span-1 flex flex-col pb-12 sm:px-8 sm:py-10",children:[(0,a.jsx)("div",{children:(0,a.jsx)(N,{children:"Model predictions on COVID-positive patients"})}),(0,a.jsx)("div",{className:"flex items-stretch flex-1",children:(0,a.jsx)(v,{labels:["Negative","FN","TP"],values:[100-M-E,E,M]})})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 xl:col-span-1 flex flex-col pb-12 sm:px-8 sm:py-10",children:[(0,a.jsx)("div",{children:(0,a.jsx)(N,{children:"Model predictions on COVID-negative patients"})}),(0,a.jsx)("div",{className:"flex items-stretch flex-1",children:(0,a.jsx)(v,{labels:["Positive","FP","TN"],values:[100-W-_,W,_]})})]})]}),(0,a.jsx)("div",{className:"flex justify-center py-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"grid gap-2 grid-cols-3 sm:grid-cols-3 lg:grid-cols-6 xl:w-auto xl:flex xl:flex-wrap xl:space-x-2",children:[(0,a.jsx)(C,{title:"TP",value:M}),(0,a.jsx)(C,{title:"TN",value:_}),(0,a.jsx)(C,{title:"FP",value:W}),(0,a.jsx)(C,{title:"FN",value:E}),(0,a.jsx)(C,{title:"Sensitivity",value:100*S}),(0,a.jsx)(C,{title:"Specificity",value:100*V}),(0,a.jsx)(C,{title:"Raw Accuracy",value:B}),(0,a.jsx)(C,{title:"PPV",value:100*z}),(0,a.jsx)(C,{title:"NPV",value:100*Z})]})})]})]}),(0,a.jsx)(p,{show:y,onClose:function(){return w(!1)},title:"Glossary",content:(0,a.jsxs)("dl",{className:"text-sm text-nhsuk-text space-y-4",children:[(0,a.jsx)(k,{title:"Sensitivity:",description:"Proportion of positive cases that are correctly predicted to be positive."}),(0,a.jsx)(k,{title:"Specificity:",description:"Proportion of negative cases that are correctly predicted to be negative."}),(0,a.jsx)(k,{title:"Raw Accuracy:",description:"Proportion of all cases that are correctly predicted (i.e. TP and TN)"}),(0,a.jsx)(k,{title:"True Positive (TP):",description:"Model correctly predicts the positive class (i.e. model predicts that a patient with Covid-19 has Covid-19)"}),(0,a.jsx)(k,{title:"False Positive (FP):",description:"Model incorrectly predicts the positive class (i.e. model predicts that a patient has Covid-19, when in fact the patient does not have Covid-19)."}),(0,a.jsx)(k,{title:"True Negative (TN):",description:"Model correctly predicts the negative class (i.e. model predicts that a patient who does not have Covid-19, doesn\u2019t have Covid-19)."}),(0,a.jsx)(k,{title:"False Negative (FN):",description:"Model incorrectly predicts the negative class (i.e. model predicts that a patient doesn\u2019t have Covid-19, when in fact the patient does have Covid-19)."}),(0,a.jsx)(k,{title:"Positive Predictive Value (PPV):",description:"Probability a case is truly positive (i.e. positive Covid-19 diagnosis), given it is predicted positive by the model."}),(0,a.jsx)(k,{title:"Negative Predictive Value (NPV):",description:"Probability a case is truly negative (i.e. negative Covid-19 diagnosis), given it is predicted negative by the model."}),(0,a.jsx)(k,{title:"True Positive Rate:",description:"Proportion of positive cases correctly predicted to be positive. Equivalent to Sensitivity."}),(0,a.jsx)(k,{title:"False Positve Rate:",description:"Proportion of negative cases incorrectly predicted to be positive. Equivalent to (1 - Specificity)."}),(0,a.jsx)(k,{title:"ROC Curve:",description:"Receiver Operator Characteristic Curve. A plotted curve which demonstrates how the trade off between True Positive Rate and False Positive Rate changes as you vary the operating point of the model."})]})}),(0,a.jsx)(p,{show:O,onClose:function(){return T(!1)},title:"Within all people the model tests...",content:(0,a.jsxs)("div",{className:"text-nhsuk-text text-sm",children:[(0,a.jsxs)("p",{children:[(M+W).toFixed(2),"% of them will be predicted to have a COVID infection (aka TPs + FPs)."]}),(0,a.jsxs)("p",{children:[E.toFixed(2),"% of them will both truely have a COVID infection and be told they do not have one (aka will be FNs)."]}),(0,a.jsxs)("p",{children:[W.toFixed(2),"% of them will both not truely have a COVID infection and be told they do have one (aka will be FPs)."]})]})})]})}var O=s(3866),T=s(4789),D=[{title:"Operating point",component:(0,a.jsx)(P,{})},{title:"Model fairness",component:(0,a.jsx)(l,{})}];function I(e){e.category,e.children;var t=(0,x.useState)(D[0]),s=t[0];t[1];return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(T.Z,{category:"Experiments"}),(0,a.jsx)("main",{className:"flex-1 flex items-stretch py-8 sm:py-12 bg-gray-50",children:s.component}),(0,a.jsx)(O.Z,{})]})}}},function(e){e.O(0,[570,103,355,774,888,179],(function(){return t=4944,e(e.s=t);var t}));var t=e.O();_N_E=t}]);