"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{6719:function(e,t,i){i.d(t,{Z:function(){return S}});var s=i(3526),n=i(6717),a=i(5893),r=i(3153);var c=i(5666),l=i.n(c),o=i(5319),d=i(7294);function u(e){var t=e.children,i=e.withPadding;return(0,a.jsx)("div",{className:"bg-white ".concat(i?"p-6":""),children:t})}var h=i(508),p=i(8933);function x(e){var t=e.height,i=e.plotData,s=e.fp,n=e.tp,r={datasets:[{label:"X",fill:!1,showLine:!0,pointRadius:0,data:[{x:s,y:0},{x:s,y:1}],borderColor:"rgba(0, 0, 0, 0.4)"},{label:"Y",fill:!1,showLine:!0,pointRadius:0,data:[{x:0,y:n},{x:1,y:n}],borderColor:"rgba(0, 0, 0, 0.4)"},{label:"ROC Curve",data:i,fill:!1,showLine:!0,pointRadius:0,lineTension:0,interpolate:!0,borderColor:"#005eb8"}]};return(0,a.jsx)(h.bp,{height:t||400,data:r,options:{plugins:{legend:{labels:{filter:function(e){if("X"!==e.text&&"Y"!==e.text)return!0}}},title:{display:!0,text:"Receiver Operating Characteristic (ROC)",font:{size:14}},crosshair:{zoom:{enabled:!1}}},scales:{x:{title:{display:!0,text:"FP Rate (1 - Specificity)"},beginAtZero:!0,ticks:{maxTicksLimit:10}},y:{title:{display:!0,text:"TP Rate Sensitivity"},beginAtZero:!0,ticks:{maxTicksLimit:10}}},animation:{duration:0}},plugins:[p.h$]})}function v(e){var t=e.height,i=e.percentage,s=e.correct,n={labels:["People without Covid"],datasets:[{label:"False Results",data:[e.incorrect],backgroundColor:"#d5281b"},{label:"True Results",data:[s],backgroundColor:"#005eb8"}]},r={plugins:{title:{display:!0,text:"True/False results in People without COVID FNs: ".concat(i,"% of all results"),font:{size:14}}},responsive:!0,scales:{x:{stacked:!0},y:{stacked:!0}}};return(0,a.jsx)(h.$Q,{height:t||200,data:n,options:r})}function m(e){var t=e.height,i=e.percentage,s=e.correct,n={labels:["People with Covid"],datasets:[{label:"False Results",data:[e.incorrect],backgroundColor:"#d5281b"},{label:"True Results",data:[s],backgroundColor:"#005eb8"}]},r={plugins:{title:{display:!0,text:"True/False results in People with COVID FNs: ".concat(i,"% of all results"),font:{size:14}}},responsive:!0,scales:{x:{stacked:!0},y:{stacked:!0}}};return(0,a.jsx)(h.$Q,{height:t||200,data:n,options:r})}var f=i(7460),g=i.n(f),j=i(7826);function y(e,t,i,s,n,a,r){try{var c=e[a](r),l=c.value}catch(o){return void i(o)}c.done?t(l):Promise.resolve(l).then(s,n)}function b(e){return function(){var t=this,i=arguments;return new Promise((function(s,n){var a=e.apply(t,i);function r(e){y(a,s,n,r,c,"next",e)}function c(e){y(a,s,n,r,c,"throw",e)}r(void 0)}))}}var w=b(l().mark((function e(t){var i,s,n,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,fetch("".concat(j.O).concat(t));case 4:return i=e.sent,s=i.body.getReader(),n=new TextDecoder("utf-8"),e.next=9,s.read();case 9:return a=e.sent,r=n.decode(a.value),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)}))),N=b(l().mark((function e(t){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return i=e.sent,e.abrupt("return",new Promise((function(e){g().parse(i,{skipEmptyLines:!0,complete:function(t){e(t.data)},error:function(e){reject(e)}})})));case 4:case"end":return e.stop()}}),e)})));function P(e,t,i,s,n,a,r){try{var c=e[a](r),l=c.value}catch(o){return void i(o)}c.done?t(l):Promise.resolve(l).then(s,n)}var k=function(e){var t=e.title,i=e.value;return(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t}),(0,a.jsxs)("dd",{className:"text-lg font-semibold text-gray-900",children:[parseFloat(i).toFixed(2),"%"]})]})})},C=function(e){var t=e.title,i=e.description;return(0,a.jsxs)("div",{className:"grid sm:grid-cols-12 gap-2 text-nhsuk-text",children:[(0,a.jsx)("dt",{className:"sm:col-span-3 font-medium",children:t}),(0,a.jsx)("dd",{className:"sm:col-span-9",children:i})]})};function F(e){var t=e.headings,i=e.rows;return(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,a.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"overflow-hidden border-b border-gray-200",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-white",children:(0,a.jsx)("tr",{children:(null===t||void 0===t?void 0:t.length)>0&&t.map((function(e,i){return(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left font-medium text-nhsuk-text ".concat(i==t.length-1?"text-right":""),children:e},e)}))})}),(0,a.jsx)("tbody",{children:(null===i||void 0===i?void 0:i.length)>0&&i.map((function(e,i){return(0,a.jsx)("tr",{className:"bg-white",children:e.map((function(e,i){return(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-nhsuk-text ".concat(i==(null===t||void 0===t?void 0:t.length)-1?"text-right":""),children:e},i)}))},i)}))})]})})})})})}function R(e,t,i,s,n,a,r){try{var c=e[a](r),l=c.value}catch(o){return void i(o)}c.done?t(l):Promise.resolve(l).then(s,n)}function T(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var S={Stats:function(){var e,t=(0,d.useState)(null),i=t[0],s=t[1],n=(0,d.useState)(null),r=n[0],c=n[1],o=(0,d.useState)(null),u=o[0],h=o[1],p=(0,d.useState)(null),x=p[0],v=p[1],m=(0,d.useState)(null),f=m[0],g=m[1],j=(e=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,N("/data/stats_patients.csv");case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=c,e.next=8,N("/data/stats_images.csv");case 8:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=h,e.next=13,N("/data/stats_storage.csv");case 13:return e.t5=e.sent,(0,e.t4)(e.t5),e.t6=v,e.next=18,N("/data/stats_submittingcentres.csv");case 18:return e.t7=e.sent,(0,e.t6)(e.t7),e.t8=g,e.next=23,N("/data/stats_date.txt");case 23:e.t9=e.sent,(0,e.t8)(e.t9);case 25:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(s,n){var a=e.apply(t,i);function r(e){R(a,s,n,r,c,"next",e)}function c(e){R(a,s,n,r,c,"throw",e)}r(void 0)}))});(0,d.useEffect)((function(){j()}),[]);var y=function(e){var t=T(e),i=t.shift();return(0,a.jsx)(F,{headings:i,rows:t})};return(0,a.jsxs)("div",{className:"space-y-6",children:[i&&y(i),r&&y(r),u&&y(u),x&&y(x),f&&(0,a.jsx)("p",{className:"text-nhsuk-secondary-text",children:(0,a.jsx)("i",{children:f[0]})})]})},Alert:function(e){var t=e.title,i=e.children;return(0,a.jsxs)("div",{className:"relative ".concat(t?"mt-10":""),children:[t&&(0,a.jsx)("div",{className:"inline-block bg-nhsuk-yellow text-nhsuk-text p-8 py-3 text-xl font-semibold",children:t}),(0,a.jsx)("div",{className:"p-8 text-lg text-nhsuk-text bg-nhsuk-pale-yellow border border-nhsuk-yellow ".concat(t?"pt-10 -mt-6":""),children:i})]})},PageLayout:n.Z,OperatingPointCharts:function(){var e,t=(0,d.useState)(5),i=t[0],s=t[1],n=(0,d.useState)(.4),c=n[0],h=n[1],p=(0,d.useState)(null),f=p[0],g=p[1],j=(0,d.useMemo)((function(){return f&&f.find((function(e){return parseFloat(e.operatingPoint).toFixed(2)-c<.02}))}),[f,c])||{x:0,y:0},y=j.x,b=j.y,w=y,F=b,R=1-w,T=i/100,S=0==c?"N/A":R*(1-T)/(R*(1-T)+(1-F)*T),O=1==c?"N/A":F*T/(F*T+(1-R)*(1-T)),A=F*i,V=R*(100-i),_=(1-F)*i,D=(1-R)*(100-i),E=A+V,I=(e=l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("/data/roc_data.csv");case 2:(t=e.sent).shift(),t=t.map((function(e){return{x:e[1],y:e[2],operatingPoint:e[3]}})),g(t);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(s,n){var a=e.apply(t,i);function r(e){P(a,s,n,r,c,"next",e)}function c(e){P(a,s,n,r,c,"throw",e)}r(void 0)}))});return(0,d.useEffect)((function(){I()}),[]),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(u,{withPadding:!0,children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2 ",children:[(0,a.jsx)("div",{children:(0,a.jsx)("label",{className:"font-medium",children:"Operating point"})}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-sm text-gray-500",children:c})})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",className:"w-full bg-nhsuk-blue",value:c,onChange:function(e){return h(e.target.value)}})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2 ",children:[(0,a.jsx)("div",{children:(0,a.jsx)("label",{className:"font-medium",children:"Prevalence (% of population with COVID):"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[i,"%"]})})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",step:"1",className:"w-full",value:i,onChange:function(e){return s(e.target.value)}})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,a.jsx)("div",{className:"col-span-4 space-y-4 md:relative",children:(0,a.jsx)("div",{className:"md:sticky md:top-0 md:-mt-4",children:(0,a.jsxs)("div",{className:"space-y-4 md:pt-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1",children:[(0,a.jsx)(k,{title:"Sensitivity",value:100*F}),(0,a.jsx)(k,{title:"Specificity",value:100*R}),(0,a.jsx)(k,{title:"Raw Accuracy",value:E})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsx)(k,{title:"PPV",value:100*O}),(0,a.jsx)(k,{title:"NPV",value:100*S}),(0,a.jsx)(k,{title:"TP",value:A}),(0,a.jsx)(k,{title:"TN",value:V}),(0,a.jsx)(k,{title:"FP",value:D}),(0,a.jsx)(k,{title:"FN",value:_})]})]})})}),(0,a.jsxs)("div",{className:"col-span-8 space-y-4",children:[(0,a.jsx)(u,{withPadding:!0,children:(0,a.jsx)(x,{height:200,plotData:f,fp:w,tp:b})}),(0,a.jsx)(u,{withPadding:!0,children:(0,a.jsx)(m,{height:200,percentage:i,correct:A,incorrect:_})}),(0,a.jsx)(u,{withPadding:!0,children:(0,a.jsx)(v,{height:200,percentage:i,correct:V,incorrect:D})})]})]}),(0,a.jsx)(u,{withPadding:!0,children:(0,a.jsxs)("div",{className:"text-nhsuk-text text-sm",children:[(0,a.jsx)("h3",{className:"text-nhsuk-text text-base font-medium mb-2",children:"Within all people the model tests..."}),(0,a.jsxs)("p",{children:[(A+D).toFixed(2),"% of them will be predicted to have a COVID infection (aka TPs + FPs)."]}),(0,a.jsxs)("p",{children:[_.toFixed(2),"% of them will both truely have a COVID infection and be told they do not have one (aka will be FNs)."]}),(0,a.jsxs)("p",{children:[D.toFixed(2),"% of them will both not truely have a COVID infection and be told they do have one (aka will be FPs)."]})]})}),(0,a.jsx)(u,{children:(0,a.jsx)(o.p,{children:function(e){var t=e.open;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.p.Button,{className:"p-6 w-full flex space-x-4 justify-between text-nhsuk-text",children:[(0,a.jsx)("div",{className:"text-base font-medium",children:"Glossary"}),(0,a.jsx)("div",{children:t?(0,a.jsx)(r.g8U,{className:"w-6 h-6"}):(0,a.jsx)(r.v4q,{className:"w-6 h-6"})})]}),(0,a.jsx)(o.p.Panel,{className:"p-6 pt-3",children:(0,a.jsxs)("dl",{className:"text-sm text-nhsuk-text space-y-4",children:[(0,a.jsx)(C,{title:"Sensitivity:",description:"Proportion of positive cases that are correctly predicted to be positive."}),(0,a.jsx)(C,{title:"Specificity:",description:"Proportion of negative cases that are correctly predicted to be negative."}),(0,a.jsx)(C,{title:"Raw Accuracy:",description:"Proportion of all cases that are correctly predicted (i.e. TP and TN)"}),(0,a.jsx)(C,{title:"True Positive (TP):",description:"Model correctly predicts the positive class (i.e. model predicts that a patient with Covid-19 has Covid-19)"}),(0,a.jsx)(C,{title:"False Positive (FP):",description:"Model incorrectly predicts the positive class (i.e. model predicts that a patient has Covid-19, when in fact the patient does not have Covid-19)."}),(0,a.jsx)(C,{title:"True Negative (TN):",description:"Model correctly predicts the negative class (i.e. model predicts that a patient who does not have Covid-19, doesn\u2019t have Covid-19)."}),(0,a.jsx)(C,{title:"False Negative (FN):",description:"Model incorrectly predicts the negative class (i.e. model predicts that a patient doesn\u2019t have Covid-19, when in fact the patient does have Covid-19)."}),(0,a.jsx)(C,{title:"Positive Predictive Value (PPV):",description:"Probability a case is truly positive (i.e. positive Covid-19 diagnosis), given it is predicted positive by the model."}),(0,a.jsx)(C,{title:"Negative Predictive Value (NPV):",description:"Probability a case is truly negative (i.e. negative Covid-19 diagnosis), given it is predicted negative by the model."}),(0,a.jsx)(C,{title:"True Positive Rate:",description:"Proportion of positive cases correctly predicted to be positive. Equivalent to Sensitivity."}),(0,a.jsx)(C,{title:"False Positve Rate:",description:"Proportion of negative cases incorrectly predicted to be positive. Equivalent to (1 - Specificity)."}),(0,a.jsx)(C,{title:"ROC Curve:",description:"Receiver Operator Characteristic Curve. A plotted curve which demonstrates how the trade off between True Positive Rate and False Positive Rate changes as you vary the operating point of the model."})]})})]})}})})]})},Introduction:s.Z}}}]);